

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Appendices &mdash; Nek5000 17.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Nek5000 17.0 documentation" href="index.html"/>
        <link rel="next" title="&lt;no title&gt;" href="bibliography.html"/>
        <link rel="prev" title="Routines of Interest" href="routines.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Nek5000
          

          
          </a>

          
            
            
              <div class="version">
                17.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_files.html">User Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="geometry.html">Geometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="large_scale.html">Performing Large-Scale Simulations in Nek5000</a></li>
<li class="toctree-l1"><a class="reference internal" href="routines.html">Routines of Interest</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Appendices</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#list-of-parameters-in-rea-file">List of Parameters in .rea File</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#available-parameters">Available Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#available-logical-switches">Available Logical Switches</a></li>
<li class="toctree-l3"><a class="reference internal" href="#logical-switches">Logical switches</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#list-of-parameters-in-size-file">List of Parameters in SIZE File</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#parameters-in-size-inc-file">Parameters in SIZE.inc File</a></li>
<li class="toctree-l3"><a class="reference internal" href="#deprecated-parameters">Deprecated Parameters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#the-fld-file-format">The .fld File Format</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#header">Header</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data">Data</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Nek5000</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Appendices</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/appendix.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="appendices">
<h1>Appendices<a class="headerlink" href="#appendices" title="Permalink to this headline">¶</a></h1>
<div class="section" id="list-of-parameters-in-rea-file">
<h2>List of Parameters in .rea File<a class="headerlink" href="#list-of-parameters-in-rea-file" title="Permalink to this headline">¶</a></h2>
<div class="section" id="parameters">
<h3>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h3>
<p>This section tells Nek5000</p>
<ul class="simple">
<li>If the input file reflects a 2D or 3D job (it should match the <code class="docutils literal"><span class="pre">ldim</span></code> parameter in the SIZE file).</li>
<li>The combination of heat transfer, Stokes, Navier-Stokes, steady or unsteady to be run.</li>
<li>The relevant physical parameters.</li>
<li>The solution algorithm within Nek5000 to use.</li>
<li>The timestep size or Courant number to use, or whether to run variable DT (<span class="math">\(dt\)</span>), etc.</li>
</ul>
<p>A <code class="docutils literal"><span class="pre">.rea</span></code> file starts with the following three parameters:</p>
<p><strong>NEKTON VERSION</strong> the version of Nek5000</p>
<p><strong>DIMENSIONAL RUN</strong> number of spatial dimensions (<code class="docutils literal"><span class="pre">NDIM</span></code> =2,3 - has to match the setting in the SIZE file).</p>
<p><strong>PARAMETERS FOLLOW</strong> the number of parameters which are going to be followed in the <code class="docutils literal"><span class="pre">.rea</span></code> file.(<code class="docutils literal"><span class="pre">NPARAM</span></code>)</p>
<p>The latter specifies how many lines of <code class="docutils literal"><span class="pre">.rea</span></code> file, starting from the next line, are the parameters and have to be read by the program.</p>
</div>
<div class="section" id="available-parameters">
<h3>Available Parameters<a class="headerlink" href="#available-parameters" title="Permalink to this headline">¶</a></h3>
<style> .red {color:red} </style><div class="line-block">
<div class="line"><strong>P001  DENSITY</strong> density for the case of constant properties (for variable density see parameter <code class="docutils literal"><span class="pre">P030</span></code>).</div>
<div class="line"><br /></div>
<div class="line"><strong>P002  VISCOS</strong>  kinematic viscosity (if <span class="math">\(&lt;0 \rightarrow Re\)</span>, otherwise <span class="math">\(1/Re\)</span>).</div>
<div class="line"><br /></div>
<div class="line"><strong>P003  BETAG</strong> if <span class="math">\(&gt;0\)</span>, natural convection is turned on (Boussinesq approximation). <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P004  GTHETA</strong> model parameter for Boussinesq approximation (see parameter P003). <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P005  PGRADX</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P006</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P007  RHOCP</strong> <code class="docutils literal"><span class="pre">navier5.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">param(7)</span> <span class="pre">=</span> <span class="pre">param(1)</span>&#160; <span class="pre">!</span> <span class="pre">rhoCP</span>&#160;&#160; <span class="pre">=</span> <span class="pre">rho</span></code> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P008  CONDUCT</strong> conductivity for the case of constant properties (if <span class="math">\(&lt;0\)</span>, it defines the Peclet number, see parameter P030).</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">connect2.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">if(param(8)</span> <span class="pre">.lt.0.0)</span> <span class="pre">param(8)</span>&#160; <span class="pre">=</span> <span class="pre">-1.0/param(8)</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">navier5.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">param(8)</span> <span class="pre">=</span> <span class="pre">param(2)</span>&#160; <span class="pre">!</span> <span class="pre">conduct</span> <span class="pre">=</span> <span class="pre">dyn.</span> <span class="pre">visc</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P009</strong> <span class="red">NOT IN USE!</span> (passed to <code class="docutils literal"><span class="pre">CPFLD(2,3)</span></code>!)</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">connect2.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">CPFLD(2,3)=PARAM(9)</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P010  FINTIME</strong> if <span class="math">\(&gt;0\)</span>, specifies simulation end time. Otherwise, use <code class="docutils literal"><span class="pre">NSTEP</span></code> (P011).</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">drive2.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">FINTIM</span> <span class="pre">=</span> <span class="pre">PARAM(10)</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P011  NSTEP</strong> number of time steps.</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">connect2.f:</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">param(11)</span> <span class="pre">=</span> <span class="pre">1.0</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">drive2.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">NSTEPS</span> <span class="pre">=</span> <span class="pre">PARAM(11)</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P012  DT</strong> upper bound on time step <span class="math">\(dt\)</span>   (if <span class="math">\(&lt;0\)</span>, then <span class="math">\(dt=|P012|\)</span> constant)</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">connect2.f:</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">param(12)</span> <span class="pre">=</span> <span class="pre">1.0</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">drive2.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">DT</span>&#160;&#160;&#160;&#160; <span class="pre">=</span> <span class="pre">abs(PARAM(12))</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P013  IOCOMM</strong> frequency of iteration histories</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">drive2.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">IOCOMM</span> <span class="pre">=</span> <span class="pre">PARAM(13)</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P014  IOTIME</strong> if <span class="math">\(&gt;0\)</span>, time interval to dump the fld file. Otherwise, use <code class="docutils literal"><span class="pre">IOSTEP</span></code> (P015).</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">drive2.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">TIMEIO</span> <span class="pre">=</span> <span class="pre">PARAM(14)</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P015  IOSTEP</strong> dump frequency, number of time steps between dumps.</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">drive2.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">IOSTEP</span> <span class="pre">=</span> <span class="pre">PARAM(15)</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">navier5.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">if</span>&#160; <span class="pre">(iastep.eq.0)</span> <span class="pre">iastep=param(15)</span>&#160;&#160; <span class="pre">!</span> <span class="pre">same</span> <span class="pre">as</span> <span class="pre">iostep</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P016  PSSOLVER</strong> heat/passive scalar solver:</div>
<div class="line-block">
<div class="line">1. Helmholz</div>
<div class="line">2. <code class="docutils literal"><span class="pre">CVODE</span></code></div>
<div class="line">3. <code class="docutils literal"><span class="pre">CVODE</span></code> with user-supplied Jacobian</div>
<div class="line">Note: a negative number will set source terms to 0.</div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P017  AXIS</strong>  <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P018  GRID</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P019  INTYPE</strong> <span class="red">NOT IN USE!</span></div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">connect2.f:</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">param(19)</span> <span class="pre">=</span> <span class="pre">0.0</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P020  NORDER</strong>  <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P021  DIVERGENCE</strong> tolerance for the pressure solver.</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">drive2.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">TOLPDF</span> <span class="pre">=</span> <span class="pre">abs(PARAM(21))</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">hmholtz.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">if</span> <span class="pre">(name.eq.'PRES'.and.param(21).ne.0)</span> <span class="pre">tol=abs(param(21))</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P022  HELMHOLTZ</strong> tolerance for the velocity solver.</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">drive2.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">TOLHDF</span> <span class="pre">=</span> <span class="pre">abs(PARAM(22))</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">hmholtz.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">if</span> <span class="pre">(param(22).ne.0)</span> <span class="pre">tol=abs(param(22))</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">hmholtz.f:</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">if</span> <span class="pre">(param(22).lt.0)</span> <span class="pre">tol=abs(param(22))*rbn0</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">navier4.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">if</span> <span class="pre">(param(22).ne.0)</span> <span class="pre">tol</span> <span class="pre">=</span> <span class="pre">abs(param(22))</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P023  NPSCAL</strong> number of passive scalars.</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">connect2.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">NPSCAL=INT(PARAM(23))</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P024  TOLREL</strong> relative tolerance for the passive scalar solver (<code class="docutils literal"><span class="pre">CVODE</span></code>).</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">drive2.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">TOLREL</span> <span class="pre">=</span> <span class="pre">abs(PARAM(24))</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P025  TOLABS</strong> absolute tolerance for the passive scalar solver (<code class="docutils literal"><span class="pre">CVODE</span></code>).</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">drive2.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">TOLABS</span> <span class="pre">=</span> <span class="pre">abs(PARAM(25))</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P026  COURANT</strong> maximum Courant number (number of RK4 substeps if OIFS is used).</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">drive2.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">CTARG</span>&#160; <span class="pre">=</span> <span class="pre">PARAM(26)</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P027  TORDER</strong> temporal discretization order (2 or 3).</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">drive2.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">NBDINP</span> <span class="pre">=</span> <span class="pre">PARAM(27)</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P028  NABMSH</strong> Order of temporal integration for mesh velocity. If 1, 2, or 3 use Adams-Bashforth of corresponding order. Otherwise, extrapolation of order <code class="docutils literal"><span class="pre">TORDER</span></code> (P027).</div>
<div class="line"><br /></div>
<div class="line"><strong>P029  MHD_VISCOS</strong> if <span class="math">\(&gt;0 \rightarrow\)</span> magnetic viscosity, if <span class="math">\(&lt;0 \rightarrow\)</span> magnetic Reynolds number.</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">connect2.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">if(param(29).lt.0.0)</span> <span class="pre">param(29)</span> <span class="pre">=</span> <span class="pre">-1.0/param(29)</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">connect2.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">if</span> <span class="pre">(param(29).ne.0.)</span> <span class="pre">ifmhd</span>&#160; <span class="pre">=</span> <span class="pre">.true.</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">connect2.f:</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">cpfld(ifldmhd,1)</span> <span class="pre">=</span> <span class="pre">param(29)</span>&#160; <span class="pre">!</span> <span class="pre">magnetic</span> <span class="pre">viscosity</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P030  USERVP</strong> if</div>
<div class="line-block">
<div class="line">0. constant properties</div>
<div class="line">1. user-defined properties via <code class="docutils literal"><span class="pre">uservp</span></code> subroutine (each scalar separately)</div>
<div class="line">2. user-defined properties via <code class="docutils literal"><span class="pre">uservp</span></code> subroutine (all scalars at once)</div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P031  NPERT</strong>  if <span class="math">\(\neq 0\)</span>, number of perturbation modes in linearized N-S.</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">connect2.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">if</span> <span class="pre">(param(31).ne.0.)</span> <span class="pre">ifpert</span> <span class="pre">=</span> <span class="pre">.true.</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">connect2.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">if</span> <span class="pre">(param(31).lt.0.)</span> <span class="pre">ifbase</span> <span class="pre">=</span> <span class="pre">.false.</span>&#160;&#160; <span class="pre">!</span> <span class="pre">don't</span> <span class="pre">time</span> <span class="pre">adv</span> <span class="pre">base</span> <span class="pre">flow</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">connect2.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">npert</span> <span class="pre">=</span> <span class="pre">abs(param(31))</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P032  NBCRE2</strong> if <span class="math">\(&gt;0\)</span>, number of BCs in <code class="docutils literal"><span class="pre">.re2</span></code> file, 0: all.</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">connect2.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">if</span> <span class="pre">(param(32).gt.0)</span> <span class="pre">nfldt</span> <span class="pre">=</span> <span class="pre">ibc</span> <span class="pre">+</span> <span class="pre">param(32)-1</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P033</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P034</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P035</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P036 XMAGNET</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P037 NGRIDES</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P038 NORDER2</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P039 NORDER3</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P040</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P041</strong> 1 <span class="math">\(\rightarrow\)</span> multiplicative SEMG</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">hsmg.f:c</span>&#160;&#160;&#160;&#160; <span class="pre">if</span> <span class="pre">(param(41).eq.1)</span> <span class="pre">ifhybrid</span> <span class="pre">=</span> <span class="pre">.true.</span></code> <span class="math">\(\leftarrow\)</span> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P042</strong> linear solver for the pressure equation, 0 <span class="math">\(\rightarrow\)</span> GMRES or 1 <span class="math">\(\rightarrow\)</span> PCG</div>
<div class="line"><br /></div>
<div class="line"><strong>P043</strong> 0: additive multilevel scheme - 1: original two level scheme.</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">navier6.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">if</span> <span class="pre">(lx1.eq.2)</span> <span class="pre">param(43)=1.</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">navier6.f:</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">if</span> <span class="pre">(param(43).eq.0)</span> <span class="pre">call</span> <span class="pre">hsmg_setup</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P044</strong> 0=E-based additive Schwarz for PnPn-2; 1=A-based.</div>
<div class="line"><br /></div>
<div class="line"><strong>P045</strong> Free-surface stability control (defaults to 1.0)</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">subs1.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">FACTOR</span> <span class="pre">=</span> <span class="pre">PARAM(45)</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P046</strong> if <span class="math">\(&gt;0\)</span>, do not set Initial Condition (no call to subroutine <code class="docutils literal"><span class="pre">SETICS</span></code>).</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">drive2.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">irst</span> <span class="pre">=</span> <span class="pre">param(46)</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">ic.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">irst</span> <span class="pre">=</span> <span class="pre">param(46)</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">!</span> <span class="pre">for</span> <span class="pre">lee's</span> <span class="pre">restart</span> <span class="pre">(rarely</span> <span class="pre">used)</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">subs1.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">irst</span> <span class="pre">=</span> <span class="pre">param(46)</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P047</strong> parameter for moving mesh (Poisson ratio for mesh elasticity solve (default 0.4)).</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">mvmesh.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">VNU</span>&#160;&#160;&#160; <span class="pre">=</span> <span class="pre">param(47)</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P048</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P049</strong> if <span class="math">\(&lt;0\)</span>, mixing length factor <span class="red">NOT IN USE!</span>.</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">drive2.f:c</span>&#160;&#160;&#160;&#160; <span class="pre">IF</span> <span class="pre">(PARAM(49)</span> <span class="pre">.LE.</span> <span class="pre">0.0)</span> <span class="pre">PARAM(49)</span> <span class="pre">=</span> <span class="pre">TLFAC</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">turb.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">TLFAC</span> <span class="pre">=</span> <span class="pre">PARAM(49)</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P050</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P051</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P052  HISTEP</strong> if <span class="math">\(&gt;1\)</span>, history points dump frequency (in number of steps).</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">prepost.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">if</span> <span class="pre">(param(52).ge.1)</span> <span class="pre">iohis=param(52)</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P053</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P054</strong> direction of fixed mass flowrate (1: <span class="math">\(x\)</span>-, 2: <span class="math">\(y\)</span>-, 3: <span class="math">\(z\)</span>-direction). If 0: <span class="math">\(x\)</span>-direction.</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">drive2.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">if</span> <span class="pre">(param(54).ne.0)</span> <span class="pre">icvflow</span> <span class="pre">=</span> <span class="pre">abs(param(54))</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">drive2.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">if</span> <span class="pre">(param(54).lt.0)</span> <span class="pre">iavflow</span> <span class="pre">=</span> <span class="pre">1</span> <span class="pre">!</span> <span class="pre">mean</span> <span class="pre">velocity</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P055</strong> volumetric flow rate for periodic case;  if p54:math:<cite>&lt;0</cite>, then p55:=mean velocity.</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">drive2.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">flowrate</span> <span class="pre">=</span> <span class="pre">param(55)</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P056</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P057</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P058</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P059</strong> if <span class="math">\(\neq0\)</span>, deformed elements (only relevant for FDM). !=0 <span class="math">\(\rightarrow\)</span> full Jac. eval. for each el.</div>
<div class="line"><br /></div>
<div class="line"><strong>P060</strong> if <span class="math">\(\neq0\)</span>, initialize velocity to 1e-10 (for steady Stokes problem).</div>
<div class="line"><br /></div>
<div class="line"><strong>P061</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P062</strong> if <span class="math">\(&gt;0\)</span>, swap bytes for output.</div>
<div class="line"><br /></div>
<div class="line"><strong>P063  WDSIZO</strong> real output wordsize (8: 8-byte reals, else 4-byte).</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">prepost.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">if</span> <span class="pre">(param(63).gt.0)</span> <span class="pre">wdsizo</span> <span class="pre">=</span> <span class="pre">8</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">!</span> <span class="pre">64-bit</span> <span class="pre">.fld</span> <span class="pre">file</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P064</strong> if <span class="math">\(=1\)</span>, restart perturbation solution</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">pertsupport.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">if(param(64).ne.1)</span> <span class="pre">then</span> <span class="pre">!fresh</span> <span class="pre">start,</span> <span class="pre">param(64)</span> <span class="pre">is</span> <span class="pre">restart</span> <span class="pre">flag</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P065</strong> number of I/O nodes (if <span class="math">\(&lt; 0\)</span> write in separate subdirectories).</div>
<div class="line"><br /></div>
<div class="line"><strong>P066</strong> Output format: (only <code class="docutils literal"><span class="pre">postx</span></code> uses <code class="docutils literal"><span class="pre">.rea</span></code> value; other nondefault should be set in <code class="docutils literal"><span class="pre">usrdat</span></code>) (if <span class="math">\(\geq 0\)</span> binary else ASCII).</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">connect2.f:</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">param(66)</span> <span class="pre">=</span> <span class="pre">6</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">!</span> <span class="pre">binary</span> <span class="pre">is</span> <span class="pre">default</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">connect2.f:</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">param(66)</span> <span class="pre">=</span> <span class="pre">0</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">!</span> <span class="pre">ASCII</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P067</strong> read format (if <span class="math">\(\geq 0\)</span> binary else ASCII).</div>
<div class="line"><br /></div>
<div class="line"><strong>P068</strong> averaging frequency in <code class="docutils literal"><span class="pre">avg_all</span></code> (0: every timestep).</div>
<div class="line"><br /></div>
<div class="line"><strong>P069</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P070</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P071</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P072</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P073</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P074</strong> if <span class="math">\(&gt; 0\)</span> print Helmholtz solver iterations.</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">hmholtz.f:</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">if</span> <span class="pre">(nid.eq.0.and.ifprint.and.param(74).ne.0)</span> <span class="pre">ifprinthmh=.true.</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P075</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P076</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P077</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P078</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P079</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P080</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P081</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P082</strong> coarse-grid dimension (2: linear). <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P083</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P084</strong> if <span class="math">\(&lt;0\)</span>, force initial time step to this value.</div>
<div class="line"><br /></div>
<div class="line"><strong>P085</strong> set <span class="math">\(dt\)</span> in <em>setdt</em>.</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">subs1.f:</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">dt=dtopf*param(85)i</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P086</strong> <span class="red">RESERVED!</span> if <span class="math">\(\neq0\)</span>, use skew-symmetric form, else convective form.</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">drive2.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">PARAM(86)</span> <span class="pre">=</span> <span class="pre">0</span> <span class="pre">!</span> <span class="pre">No</span> <span class="pre">skew-symm.</span> <span class="pre">convection</span> <span class="pre">for</span> <span class="pre">now</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">navier1.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">if</span> <span class="pre">(param(86).ne.0.0)</span> <span class="pre">then</span>&#160; <span class="pre">!</span> <span class="pre">skew-symmetric</span> <span class="pre">form</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P087</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P088</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P089</strong> <span class="red">RESERVED!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P090</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P091</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P092</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P093</strong>  number of previous solutions to use for residual projection.</div>
<div class="line-block">
<div class="line">(adjust <code class="docutils literal"><span class="pre">MXPREF</span></code> in <code class="docutils literal"><span class="pre">SIZEu</span></code> accordingly)</div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P094</strong> if <span class="math">\(&gt;0\)</span>, start projecting velocity and passive scalars after P094 steps</div>
<div class="line"><br /></div>
<div class="line"><strong>P095</strong> if <span class="math">\(&gt;0\)</span>, start projecting pressure after P095 steps</div>
<div class="line"><br /></div>
<div class="line"><strong>P096</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P097</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P098</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P099</strong> dealiasing:</div>
<div class="line-block">
<div class="line"><span class="math">\(&lt;0\)</span>:  disable</div>
<div class="line">3:  old dealiasing</div>
<div class="line">4:  new dealiasing</div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P100</strong> <span class="red">RESERVED!</span> pressure preconditioner when using CG solver (0: Jacobi, <span class="math">\(&gt;0\)</span>: two-level Schwarz) <span class="red">or viseversa?</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P101</strong> number of additional modes to filter (0: only last mode)</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">navier5.f:</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">ncut</span> <span class="pre">=</span> <span class="pre">param(101)+1</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P102</strong> <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>P103</strong> filter weight for last mode (<span class="math">\(&lt;0\)</span>: disabled)</div>
<div class="line"><br /></div>
<div class="line"><strong>P107</strong> if <span class="math">\(\neq0\)</span>, add it to <code class="docutils literal"><span class="pre">h2</span></code> in <code class="docutils literal"><span class="pre">sethlm</span></code></div>
<div class="line"><br /></div>
<div class="line"><strong>P116 NELX</strong> number of elements in <span class="math">\(x\)</span> for Fast Tensor Product FTP solver (0: do not use FTP).</div>
<div class="line-block">
<div class="line">NOTE: box geometries, constant properties only!</div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>P117  NELY</strong> number of elements in <span class="math">\(y\)</span> for FTP</div>
<div class="line"><br /></div>
<div class="line"><strong>P118  NELZ</strong> number of elements in <span class="math">\(z\)</span> for FTP</div>
</div>
</div>
<div class="section" id="available-logical-switches">
<h3>Available Logical Switches<a class="headerlink" href="#available-logical-switches" title="Permalink to this headline">¶</a></h3>
<p>This part of <code class="docutils literal"><span class="pre">.rea</span></code> file starts with such a line:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">n</span>   <span class="n">LOGICAL</span> <span class="n">SWITCHES</span> <span class="n">FOLLOW</span>
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">n</span></code> is the number of logical switches which is set in the following lines.</p>
</div>
<div class="section" id="logical-switches">
<span id="sec-switches"></span><h3>Logical switches<a class="headerlink" href="#logical-switches" title="Permalink to this headline">¶</a></h3>
<p>Note that by default all logical switches are set to false.</p>
<p><strong>IFFLOW</strong> solve for fluid (velocity, pressure).</p>
<p><strong>IFHEAT</strong> solve for heat (temperature and/or scalars).</p>
<p><strong>IFTRAN</strong> solve transient equations (otherwise, solve the steady Stokes flow).</p>
<p><strong>IFADVC</strong> specify the fields with convection.</p>
<p><strong>IFTMSH</strong> specify the field(s) defined on T mesh  (first field is the ALE mesh).</p>
<p><strong>IFAXIS</strong> axisymmetric formulation.</p>
<p><strong>IFSTRS</strong> use stress formulation in the incompressible case.</p>
<p><strong>IFLOMACH</strong> use low Mach number compressible flow.</p>
<p><strong>IFMGRID</strong> moving grid (for free surface flow).</p>
<p><strong>IFMVBD</strong> moving boundary (for free surface flow).</p>
<p><strong>IFCHAR</strong> use characteristics for convection operator.</p>
<p><strong>IFSYNC</strong> use mpi barriers to provide better timing information.</p>
<p><strong>IFUSERVP</strong> user-defined properties (e.g., <span class="math">\(\mu\)</span>, <span class="math">\(\rho\)</span> varying with space and time.</p>
</div>
</div>
<div class="section" id="list-of-parameters-in-size-file">
<h2>List of Parameters in SIZE File<a class="headerlink" href="#list-of-parameters-in-size-file" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line"><strong>ldim</strong>: number of spatial dimensions (2 or 3).</div>
<div class="line"><br /></div>
<div class="line"><strong>lx1</strong>: number of (GLL) points in the <span class="math">\(x\)</span> -direction within each element of mesh1 (velocity) which is equal to the (polynomial order <span class="math">\(+1\)</span>) by definition.</div>
<div class="line"><br /></div>
<div class="line">(<code class="docutils literal"><span class="pre">lx1</span></code> recomeneded odd for better performance)</div>
<div class="line"><br /></div>
<div class="line"><strong>lx2</strong>: number of (GLL) points in the <span class="math">\(x\)</span> -directions within each element of mesh2 (pressure). Use <code class="docutils literal"><span class="pre">lx2=lx1</span></code> for PN/PN formulation or <code class="docutils literal"><span class="pre">lx2=lx1-2</span></code> for PN/PN-2 formulation.</div>
<div class="line"><br /></div>
<div class="line"><strong>lxd</strong>: number of points for over integration (dealiasing), use three half rule e.g. for <code class="docutils literal"><span class="pre">lx1=8</span></code> use <code class="docutils literal"><span class="pre">lxd=12</span></code>.</div>
<div class="line"><br /></div>
<div class="line"><strong>lelx, lely, lelz</strong>: maximum number of elements per rank for global FDM (Fast Diagonalization Method) solver.</div>
<div class="line"><br /></div>
<div class="line"><strong>ldimt</strong>:  maximum number of T-array fields (temperature + additional scalars).</div>
<div class="line"><br /></div>
<div class="line"><strong>lpmax</strong>: maximum number of ranks.</div>
<div class="line"><br /></div>
<div class="line"><strong>lpmin</strong>: minimum number of ranks.</div>
<div class="line"><br /></div>
<div class="line"><strong>lelg</strong>: maximum (global) number of elements (it is usually set more than the # of elements existing in the mesh, for making maximum use of memory is can be set to the exact number of mesh elements).</div>
<div class="line"><br /></div>
<div class="line"><strong>lelt</strong>: maximum number of local elements for T-mesh (per rank, <code class="docutils literal"><span class="pre">lelt</span></code> <span class="math">\(\geq\)</span> <code class="docutils literal"><span class="pre">lelg/np</span> <span class="pre">+1</span></code>).</div>
<div class="line"><br /></div>
<div class="line"><strong>lpelt</strong>: Number of elements of the perturbation field, number of perturbation fields</div>
<div class="line"><br /></div>
<div class="line"><strong>lbelt</strong>: Total Number of elements of the B-field (MHD)</div>
<div class="line"><br /></div>
<div class="line"><strong>lx1m</strong>: when the mesh is a moving type <code class="docutils literal"><span class="pre">lx1m=lx1</span></code>, otherwise it is set to 1.</div>
<div class="line"><br /></div>
<div class="line"><strong>lorder</strong>: maximum time integration order (2 or 3).</div>
<div class="line"><br /></div>
<div class="line"><strong>maxobj</strong>: maximum number of objects. <span class="red">zero if not using objects?</span></div>
<div class="line"><br /></div>
<div class="line"><strong>maxmbr</strong>: maximum number of members in an object.</div>
<div class="line"><br /></div>
<div class="line"><strong>lhis</strong>: maximum number of history points a single rank will read in (<code class="docutils literal"><span class="pre">NP*LHIS</span></code> <span class="math">\(&lt;\)</span> number of points in <code class="docutils literal"><span class="pre">hpts.in</span></code>).</div>
<div class="line"><br /></div>
<div class="line"><strong>mxprev</strong>: maximum number of history entries for residual projection (recommended value: 20).</div>
<div class="line"><br /></div>
<div class="line"><strong>lgmres</strong>: dimension of Krylov subspace in GMRES (recommended value: 40).</div>
</div>
<div class="section" id="parameters-in-size-inc-file">
<h3>Parameters in SIZE.inc File<a class="headerlink" href="#parameters-in-size-inc-file" title="Permalink to this headline">¶</a></h3>
<p>The following parameters appeared in the SIZE file in previous versions, and are now moved to the internal SIZE.inc file. They are automatically set based on SIZE parameters.</p>
<div class="line-block">
<div class="line"><strong>ly1, lz1</strong>: number of (GLL) points in the <span class="math">\(y\)</span> and <span class="math">\(z\)</span>-directions, respectively, within each element of mesh1 (velocity) which is equal to the (polynomial order <span class="math">\(+1\)</span>) by definition. <code class="docutils literal"><span class="pre">ly1</span></code> is usually the same as <code class="docutils literal"><span class="pre">lx1</span></code> and for 2D cases <code class="docutils literal"><span class="pre">lz1=1</span></code>.</div>
<div class="line">(is <code class="docutils literal"><span class="pre">lx1</span></code> <span class="math">\(\neq\)</span> <code class="docutils literal"><span class="pre">ly1</span></code> supported?)</div>
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line"><strong>ly2, lz2</strong>: number of (GLL) points in the <span class="math">\(y\)</span> and <span class="math">\(z\)</span> directions, respectively, within each element of mesh2 (pressure).</div>
<div class="line"><br /></div>
<div class="line"><strong>lx3, ly3, lz3</strong>: number of (GLL) points in the <span class="math">\(x\)</span>, <span class="math">\(y\)</span> and <span class="math">\(z\)</span> directions, respectively, within each element of mesh3. These are set to the same number of (GLL) point on mesh1.</div>
<div class="line">(mesh3 is rarely used)</div>
<div class="line"><br /></div>
<div class="line"><strong>lyd, lzd</strong>: number of points for over integration (dealiasing). <code class="docutils literal"><span class="pre">lyd</span> <span class="pre">=</span> <span class="pre">lxd</span></code>, and <code class="docutils literal"><span class="pre">lzd</span> <span class="pre">=</span> <span class="pre">lxd</span></code> for 3D and <code class="docutils literal"><span class="pre">lzd</span> <span class="pre">=</span> <span class="pre">1</span></code> for 2D.</div>
<div class="line"><br /></div>
<div class="line"><strong>lp</strong>: <code class="docutils literal"><span class="pre">lp</span> <span class="pre">=</span> <span class="pre">lpmax</span></code></div>
<div class="line"><br /></div>
<div class="line"><strong>lelv</strong>: maximum number of local elements for V-mesh (<code class="docutils literal"><span class="pre">lelv</span> <span class="pre">=</span> <span class="pre">lelt</span></code>).</div>
<div class="line"><br /></div>
<div class="line"><strong>lpelv</strong>: Number of elements of the perturbation field, number of perturbation fields. <code class="docutils literal"><span class="pre">lpelv</span> <span class="pre">=</span> <span class="pre">lpelt</span></code>.</div>
<div class="line"><br /></div>
<div class="line"><strong>lpx1, lpy1, lpz1</strong>: Number of point in <span class="math">\(x\)</span>, <span class="math">\(y\)</span>, <span class="math">\(z\)</span> direction of perturbation field within each element of mesh1. <code class="docutils literal"><span class="pre">lpx1</span> <span class="pre">=</span> <span class="pre">lx1</span></code>, <code class="docutils literal"><span class="pre">lpy1</span> <span class="pre">=</span> <span class="pre">lpx1</span></code>, and <code class="docutils literal"><span class="pre">lpz1</span> <span class="pre">=</span> <span class="pre">lpx1</span></code> for 3D and <code class="docutils literal"><span class="pre">lpz1</span> <span class="pre">=</span> <span class="pre">1</span></code> for 2D.</div>
<div class="line"><br /></div>
<div class="line"><strong>lbelv</strong>: Total Number of elements of the B-field (MHD). <code class="docutils literal"><span class="pre">lbelv</span> <span class="pre">=</span> <span class="pre">lbelt</span></code>.</div>
<div class="line"><br /></div>
<div class="line"><strong>lbx1, lby1, lbz1</strong>: Number of point in <span class="math">\(x\)</span>, <span class="math">\(y\)</span>, <span class="math">\(z\)</span> direction of B-field within each element of mesh1. <code class="docutils literal"><span class="pre">lbx1</span> <span class="pre">=</span> <span class="pre">lx1</span></code>, <code class="docutils literal"><span class="pre">lby1</span> <span class="pre">=</span> <span class="pre">lbx1</span></code>, and <code class="docutils literal"><span class="pre">lbz1</span> <span class="pre">=</span> <span class="pre">lbx1</span></code> for 3D and <code class="docutils literal"><span class="pre">lbz1</span> <span class="pre">=</span> <span class="pre">1</span></code> for 2D.</div>
<div class="line"><br /></div>
<div class="line"><strong>lbx2, lby2, lbz2</strong>: Number of point in <span class="math">\(x\)</span>, <span class="math">\(y\)</span>, <span class="math">\(z\)</span> direction of B-field within each element of mesh2. <code class="docutils literal"><span class="pre">lbx2</span> <span class="pre">=</span> <span class="pre">lx2</span></code>, <code class="docutils literal"><span class="pre">lby2</span> <span class="pre">=</span> <span class="pre">lbx2</span></code>, and <code class="docutils literal"><span class="pre">lbz2</span> <span class="pre">=</span> <span class="pre">lbx2</span></code> for 3D and <code class="docutils literal"><span class="pre">lbz2</span> <span class="pre">=</span> <span class="pre">1</span></code> for 2D.</div>
<div class="line"><br /></div>
<div class="line"><strong>ly1m, lz1m</strong>: when the mesh is a moving type <code class="docutils literal"><span class="pre">lx1m=lx1</span></code>, otherwise it is set to 1. <code class="docutils literal"><span class="pre">ly1m</span> <span class="pre">=</span> <span class="pre">lx1m</span></code>, and <code class="docutils literal"><span class="pre">lz1m</span> <span class="pre">=</span> <span class="pre">lx1m</span></code> for 3D and <code class="docutils literal"><span class="pre">lz1m</span> <span class="pre">=</span> <span class="pre">1</span></code> for 2D.</div>
<div class="line"><br /></div>
<div class="line"><strong>lxz</strong>: lxz = lx1*lz1</div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">connect1.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">common</span> <span class="pre">/scruz/</span>&#160; <span class="pre">snx(lxz)</span> <span class="pre">,</span> <span class="pre">sny(lxz)</span> <span class="pre">,</span> <span class="pre">snz(lxz)</span> <span class="pre">,</span>&#160; <span class="pre">efc(lxz)</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>lctmp0</strong>: <code class="docutils literal"><span class="pre">lctmp0</span> <span class="pre">=</span> <span class="pre">2*lx1*ly1*lz1*lelt</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">drive1.f:c</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">COMMON</span> <span class="pre">/CTMP0/</span> <span class="pre">DUMMY0(LCTMP0)</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>lctmp1</strong>: <code class="docutils literal"><span class="pre">lctmp1</span> <span class="pre">=</span> <span class="pre">4*lx1*ly1*lz1*lelt</span></code></div>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">drive1.f:c</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">COMMON</span> <span class="pre">/CTMP1/</span> <span class="pre">DUMMY1(LCTMP1)</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">drive2.f:</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">COMMON</span> <span class="pre">/SCRNS/</span> <span class="pre">WORK(LCTMP1)</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><strong>maxmor</strong>: <code class="docutils literal"><span class="pre">=lelt</span></code></div>
<div class="line"><br /></div>
<div class="line"><strong>lzl</strong>: for 2D cases <code class="docutils literal"><span class="pre">lzl=1</span></code> and for 3D cases <code class="docutils literal"><span class="pre">lzl=3</span></code> (computed automatically).</div>
</div>
</div>
<div class="section" id="deprecated-parameters">
<h3>Deprecated Parameters<a class="headerlink" href="#deprecated-parameters" title="Permalink to this headline">¶</a></h3>
<p>The following parameters are deprecated and were subsequently removed in newer versions.</p>
<div class="line-block">
<div class="line"><strong>lpert</strong>: Number of elements of the perturbation field, number of perturbation fields</div>
<div class="line"><br /></div>
<div class="line"><strong>lstore</strong>: <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>lsvec</strong>: <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>lmvec</strong>: <span class="red">NOT IN USE !</span></div>
<div class="line"><br /></div>
<div class="line"><strong>lvec</strong>: <span class="red">NOT IN USE!</span></div>
<div class="line"><br /></div>
<div class="line"><strong>lelgec</strong>: <code class="docutils literal"><span class="pre">lelgec</span> <span class="pre">=</span> <span class="pre">1</span></code></div>
<div class="line"><br /></div>
<div class="line"><strong>lxyz2</strong>: <code class="docutils literal"><span class="pre">lxyz2</span> <span class="pre">=</span> <span class="pre">1</span></code></div>
<div class="line"><br /></div>
<div class="line"><strong>lxz21</strong>: <code class="docutils literal"><span class="pre">lxz21</span> <span class="pre">=</span> <span class="pre">1</span></code></div>
<div class="line"><br /></div>
<div class="line"><strong>lmaxv</strong>: <code class="docutils literal"><span class="pre">lmaxv</span> <span class="pre">=</span> <span class="pre">lx1*ly1*lz1*lelv</span></code></div>
<div class="line"><br /></div>
<div class="line"><strong>lmaxt</strong>: <code class="docutils literal"><span class="pre">lmaxt</span> <span class="pre">=</span> <span class="pre">lx1*ly1*lz1*lelt</span></code></div>
<div class="line"><br /></div>
<div class="line"><strong>lmaxp</strong>: <code class="docutils literal"><span class="pre">lmaxp</span> <span class="pre">=</span> <span class="pre">lx1*ly1*lz1*lelv</span></code></div>
</div>
</div>
</div>
<div class="section" id="the-fld-file-format">
<h2>The .fld File Format<a class="headerlink" href="#the-fld-file-format" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">fld</span></code> file format is used to write and read data both in serial and parallel
in Nek5000. This section describes the format and should allow third party tool
developers to implement pre and postprocessing tools.</p>
<p>The file is composed of:</p>
<blockquote>
<div><ul class="simple">
<li>the <em>header</em> in ASCII format,</li>
<li>mesh data, including the geometry, saved unrolled as scalar vector
fields</li>
</ul>
</div></blockquote>
<p>We will go through each of these categories and give a description of its
composition.</p>
<div class="section" id="header">
<h3>Header<a class="headerlink" href="#header" title="Permalink to this headline">¶</a></h3>
<p>The header provides structural information about the stored data that is needed
to parse it correctly. The header is composed of 11 values in ASCII format. It
has a fixed size of 132 bytes and starts with the string <code class="docutils literal"><span class="pre">#std</span></code>. All
header entries are padded to the right. After the header with 132 bytes, 4 bytes
follow that determine the endianess of the binary file.  It is the binary
representation of the number 6.54321 either in little or big endian.</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="12%" />
<col width="17%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Entry</th>
<th class="head">Padding</th>
<th class="head">Name</th>
<th class="head">Short Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>2</td>
<td><code class="docutils literal"><span class="pre">wdsizo</span></code></td>
<td>sets the precision to 4 (float) or 8 (double)</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>3</td>
<td><code class="docutils literal"><span class="pre">nx</span></code></td>
<td>number of coordinates in x direction</td>
</tr>
<tr class="row-even"><td>2</td>
<td>3</td>
<td><code class="docutils literal"><span class="pre">ny</span></code></td>
<td>number of coordinates in y direction</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>3</td>
<td><code class="docutils literal"><span class="pre">nz</span></code></td>
<td>number of coordinates in z direction</td>
</tr>
<tr class="row-even"><td>5</td>
<td>11</td>
<td><code class="docutils literal"><span class="pre">nelo</span></code></td>
<td>number of elements</td>
</tr>
<tr class="row-odd"><td>6</td>
<td>11</td>
<td><code class="docutils literal"><span class="pre">nelgt</span></code></td>
<td><span class="red">&#8212;-</span></td>
</tr>
<tr class="row-even"><td>7</td>
<td>21</td>
<td><code class="docutils literal"><span class="pre">time</span></code></td>
<td>time stamp</td>
</tr>
<tr class="row-odd"><td>8</td>
<td>10</td>
<td><code class="docutils literal"><span class="pre">iostep</span></code></td>
<td>time step</td>
</tr>
<tr class="row-even"><td>9</td>
<td>7</td>
<td><code class="docutils literal"><span class="pre">fid0</span></code></td>
<td><span class="red">field id</span></td>
</tr>
<tr class="row-odd"><td>10</td>
<td>7</td>
<td><code class="docutils literal"><span class="pre">nfileoo</span></code></td>
<td><span class="red">number of files</span></td>
</tr>
<tr class="row-even"><td>11</td>
<td>4</td>
<td><code class="docutils literal"><span class="pre">rdcode</span></code></td>
<td>Fields written</td>
</tr>
</tbody>
</table>
<p>Example of a header::</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1">#std 4  6  6  1         36         36  0.1000000000000E+03     10000     0      1 XUP                                              úaÑ@</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">wdsize</span></code> sets the precision of the floating point numbers in the file. This
is either 4 bytes for floats or 8 bytes for double precision.</p>
<p><code class="docutils literal"><span class="pre">nx</span></code>, <code class="docutils literal"><span class="pre">ny</span></code> and <code class="docutils literal"><span class="pre">nz</span></code> set the number of coordinates in  <span class="math">\(x\)</span>, <span class="math">\(y\)</span> and <span class="math">\(z\)</span>
direction for each element (polynomial order), respectively. <code class="docutils literal"><span class="pre">nelo</span></code> sets
the number of total elements on the mesh.</p>
<p><code class="docutils literal"><span class="pre">time</span></code> is the simulation time while <code class="docutils literal"><span class="pre">iostep</span></code> is the time step when the file was written.</p>
<p><code class="docutils literal"><span class="pre">rdcode</span></code> determines which fields are contained in the file:</p>
<blockquote>
<div><ul class="simple">
<li>X: Geometry</li>
<li>U: Velocity</li>
<li>P: Pressure</li>
<li>T: Temperature</li>
<li>S: Passive scalar</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="data">
<h3>Data<a class="headerlink" href="#data" title="Permalink to this headline">¶</a></h3>
<p>The data field begins after the first 136 bytes of the file. The values are
stored unrolled for each element and for each direction.
Example code for reading the geometry field in python:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">iel</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelo</span><span class="p">):</span>
    <span class="n">x</span><span class="o">=</span><span class="n">ifilebuf</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">nxyzo8</span><span class="o">*</span><span class="n">wdsizo</span><span class="p">)</span>
    <span class="n">xup</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">nxyzo8</span><span class="o">*</span><span class="n">c</span><span class="p">,</span><span class="n">x</span><span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="n">c</span><span class="p">)</span>
    <span class="n">xfield</span><span class="p">[</span><span class="n">iel</span><span class="p">,:]</span><span class="o">=</span><span class="n">xup</span>
    <span class="n">y</span><span class="o">=</span><span class="n">ifilebuf</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">nxyzo8</span><span class="o">*</span><span class="n">wdsizo</span><span class="p">)</span>
    <span class="n">yup</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">nxyzo8</span><span class="o">*</span><span class="n">c</span><span class="p">,</span><span class="n">y</span><span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="n">c</span><span class="p">)</span>
    <span class="n">yfield</span><span class="p">[</span><span class="n">iel</span><span class="p">,:]</span><span class="o">=</span><span class="n">yup</span>
    <span class="k">if</span> <span class="n">if3d</span><span class="p">:</span>
        <span class="n">z</span><span class="o">=</span><span class="n">ifilebuf</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">nxyzo8</span><span class="o">*</span><span class="n">wdsizo</span><span class="p">)</span>
        <span class="n">zup</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">nxyzo8</span><span class="o">*</span><span class="n">c</span><span class="p">,</span><span class="n">z</span><span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="n">c</span><span class="p">)</span>
        <span class="n">zfield</span><span class="p">[</span><span class="n">iel</span><span class="p">,:]</span><span class="o">=</span><span class="n">zup</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="bibliography.html" class="btn btn-neutral float-right" title="&lt;no title&gt;" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="routines.html" class="btn btn-neutral" title="Routines of Interest" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Paul Fischer, James Lottes,  Stefan Kerkemeier, Oana Marin, Katherine Heisey, Aleks Obabko, Elia Merzari, Yulia Peet, Ronald Rahaman.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'17.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>